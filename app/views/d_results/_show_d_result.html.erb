<div id="tabs">
  <ul>
    <li><a href="#first">商品入力</a></li>
    <li><a href="#second">メータ入力</a></li>
    <li><a href="#third">その他入力</a></li>
  </ul>

  <div id="first">	
  <table id='rounded-corner'>
	<tr>
	  <th width="160">出荷数量(L)</th>
	  <th width="115">POS1</th>
	  <th width="115">POS2</th>	
	  <th width="115">POS3</th>
	  <th width="100">POS日計</th>
	</tr>
  <% @m_oil_totals.each do |m_oil| %>
    <tr>
      <th><%= m_oil.oil_name %></th> 	
      <td class="input_no"><%= num_fmt(m_oil.pos1_data, true) %>&nbsp;L</td>
      <td class="input_no"><%= num_fmt(m_oil.pos2_data, true) %>&nbsp;L</td>
      <td class="input_no"><%= num_fmt(m_oil.pos3_data, true) %>&nbsp;L</td>
      <td class="input_no" id="display"><%= num_fmt(m_oil.pos_total, true) %>&nbsp;L</td>                
    </tr>
  <% end %>
    <tr>
      <th>ガソリン合計</th>
      <td class="input_no" id="display"><%= num_fmt(@pos1_gasorin, true) %>&nbsp;L</td>
      <td class="input_no" id="display"><%= num_fmt(@pos2_gasorin, true) %>&nbsp;L</td>
      <td class="input_no" id="display"><%= num_fmt(@pos3_gasorin, true) %>&nbsp;L</td>
      <td class="input_no" id="display"><%= num_fmt(@total_gasorin, true) %>&nbsp;L</td>
    </tr>
    <tr>
      <th>MOFUEL計</th>
      <td class="input_no" id="display"><%= num_fmt(@pos1_mofuel, true) %>&nbsp;L</td>
      <td class="input_no" id="display"><%= num_fmt(@pos2_mofuel, true) %>&nbsp;L</td>
      <td class="input_no" id="display"><%= num_fmt(@pos3_mofuel, true) %>&nbsp;L</td>
      <td class="input_no" id="display"><%= num_fmt(@total_mofuel, true) %>&nbsp;L</td>
    </tr>   
  </table>
  <br/>

  <table id='rounded-corner'>
	<tr>
	  <th width="160">油外販売</th>
	  <th width="115">POS1</th>
	  <th width="115">POS2</th>	
	  <th width="115">POS3</th>
	  <th width="100">POS日計</th>	
	</tr>
  <% @oiletc0s.each do |oiletc0| %>
    <% 
    if oiletc0.oiletc_tani == 6
      flg = true
    else
      flg = false    	
    end		
    %>
    <tr>
      <th><%= oiletc0.oiletc_name %></th> 	
      <td class="input_no"><%= num_fmt(oiletc0.pos1_data, flg) %>&nbsp;<%= oiletc0.code_name %></td>
      <td class="input_no"><%= num_fmt(oiletc0.pos2_data, flg) %>&nbsp;<%= oiletc0.code_name %></td>
      <td class="input_no"><%= num_fmt(oiletc0.pos3_data, flg) %>&nbsp;<%= oiletc0.code_name %></td>  
      <td class="input_no" id="display"><%= num_fmt(oiletc0.pos_total, flg) %>&nbsp;<%= oiletc0.code_name %></td>              
    </tr>
  <% end %>	
    <tr>
      <th>油外合計</th>
      <td class="input_no" id="display"><%= num_fmt(@etc0_pos1_total)%>&nbsp;円</td>
      <td class="input_no" id="display"><%= num_fmt(@etc0_pos2_total) %>&nbsp;円</td>
      <td class="input_no" id="display"><%= num_fmt(@etc0_pos3_total) %>&nbsp;円</td>
      <td class="input_no" id="display"><%= num_fmt(@etc0_pos_total) %>&nbsp;円</td>
    </tr>  
  </table>	
  <br/>
  
  <table id='rounded-corner'>
	<tr>
	  <th width="160">その他商品</th>
	  <th width="115">POS1</th>
	  <th width="115">POS2</th>	
	  <th width="115">POS3</th>
	  <th width="100">POS日計</th>	
	</tr>
  <% @oiletc1s.each do |oiletc1| %>
    <% 
    if oiletc1.oiletc_tani == 6
      flg = true
    else
      flg = false    	
    end		
    %>  
    <tr>
      <th><%= oiletc1.oiletc_name %></th> 	
      <td class="input_no"><%= num_fmt(oiletc1.pos1_data, flg) %>&nbsp;<%= oiletc1.code_name %></td>
      <td class="input_no"><%= num_fmt(oiletc1.pos2_data, flg) %>&nbsp;<%= oiletc1.code_name %></td>
      <td class="input_no"><%= num_fmt(oiletc1.pos3_data, flg) %>&nbsp;<%= oiletc1.code_name %></td>  
      <td class="input_no" id="display"><%= num_fmt(oiletc1.pos_total, flg) %>&nbsp;<%= oiletc1.code_name %></td>              
    </tr>
  <% end %>	
  </table>	
  <br/>
  
  <table id='rounded-corner'>
	<tr>
	  <th width="160">その他売上</th>
	  <th width="115">POS1</th>
	  <th width="115">POS2</th>	
	  <th width="115">POS3</th>
	  <th width="100">POS日計</th>	
	</tr>
  <% @m_etcs.each do |m_etc| %>
    <% 
    if m_etc.etc_tani == 6
      flg = true
    else
      flg = false    	
    end		
    %>   
    <tr>
      <th><%= m_etc.etc_name %></th> 	
      <td class="input_no"><%= num_fmt(m_etc.pos1_data, flg) %>&nbsp;<%= m_etc.code_name %></td>
      <td class="input_no"><%= num_fmt(m_etc.pos2_data, flg) %>&nbsp;<%= m_etc.code_name %></td>
      <td class="input_no"><%= num_fmt(m_etc.pos3_data, flg) %>&nbsp;<%= m_etc.code_name %></td>  
      <td class="input_no" id="display"><%= num_fmt(m_etc.pos_total, flg) %>&nbsp;<%= m_etc.code_name %></td>              
    </tr>      
  <% end %>	
  </table>	
  </div>

  <div id="second">
  <table id='rounded-corner'>
	<tr>
	  <th>油種</th>
	  <th>タンク容量(KL)</th>
	  <th>メーター進み</th>
	  <th>メーター過不足</th>
	  <th>地下タンク過不足</th>
	  <th>仕入(L)</th>
	  <th>在庫(L)</th>	
	  <td rowspan="<%= @meters.size + 1 %>">
	  	<%= link_to 'メーター詳細', {:controller => 'd_results', :action => 'meter_index', :result_date => @result_date, :m_shop_id => @m_shop.id}, :id => "meter_icon", :class => "modal" %>
	    <br/><br/><br/>
	    <%= link_to 'タンク詳細', {:controller => 'd_results', :action => 'tank_index', :result_date => @result_date, :m_shop_id => @m_shop.id}, :id => "tank_icon", :class => "modal" %>
	  </td>	 	    	  	  	  	  	  
	</tr>	
  <% @meters.each do |meter| %>
    <tr>
      <th><%= meter[:oil_name] %></th>
      <th><%= meter[:volume] %></th>
      <td class="input_no" id="display"><%= meter[:meter_susumi] %></td>
      <% if meter[:meter_kabusoku].to_i < 0 %>
        <td class="input_no" id="display" style="color: red;"><%= meter[:meter_kabusoku] %></td>
      <% else %>  
        <td class="input_no" id="display"><%= meter[:meter_kabusoku] %></td>
      <% end %>   
      
      <% if meter[:tank_kabusoku].to_i < 0 %>
        <td class="input_no" id="display" style="color: red;"><%= meter[:tank_kabusoku] %></td>
      <% else %>
        <td class="input_no" id="display"><%= meter[:tank_kabusoku] %></td>
      <% end %>
      <td class="input_no" id="display"><%= meter[:receive] %></td>
      <td class="input_no" id="display"><%= meter[:stock] %></td>                                            
    </tr>
  <% end %>	
  </table>
  <br/>

  <table id='rounded-corner'>
    <tr>
      <th>タンク</th>
      <th>油種</th>
	  <th>前日在庫</th>
      <th>受入数量</th>
      <th>販売数量</th>
	  <th>計算在庫</th>
      <th>当日在庫</th>
      <th>増減</th>
	  <th>販売累計</th>
      <th>増減累計</th>
      <th>増減率</th>
	  <th>点検</th>			  	  	  
    </tr>
  <% @d_tank_compute_reports.each do |d_tank_compute_report| %>
    <tr>
      <th>タンク<%= d_tank_compute_report[:tank_no] %></th> 	
      <th><%= d_tank_compute_report[:oil_name] %></th> 
      <td class="input_no" id="display"><%= num_fmt(d_tank_compute_report[:before_stock]) %></td> 
      <td class="input_no" id="display"><%= num_fmt(d_tank_compute_report[:receive]) %></td>
      <td class="input_no" id="display"><%= num_fmt(d_tank_compute_report[:sale]) %></td>  	
      <td class="input_no" id="display"><%= num_fmt(d_tank_compute_report[:compute_stock]) %></td> 
      <td class="input_no" id="display"><%= num_fmt(d_tank_compute_report[:after_stock]) %></td> 
      
      <% if d_tank_compute_report[:decrease].blank? or ((d_tank_compute_report[:decrease]).abs < d_tank_compute_report[:oil_limit].to_i) %>
        <td class="input_no" id="display"><%= num_fmt(d_tank_compute_report[:decrease]) %></td> 
      <% else %>
        <td class="input_no" id="display" style="background: gold;"><%= num_fmt(d_tank_compute_report[:decrease]) %></td>
      <% end %>	
      <td class="input_no" id="display"><%= num_fmt(d_tank_compute_report[:sale_total]) %></td> 
      <td class="input_no" id="display"><%= num_fmt(d_tank_compute_report[:decrease_total]) %></td> 
      <td class="input_no" id="display"><%= num_fmt(d_tank_compute_report[:total_percentage], true) %></td> 
      <td align="center" id="display" style="font-size: 30px;">
      	<% if d_tank_compute_report[:inspect_flg] == 1 %>
      	  ○
      	<% end %>
      </td>                             
    </tr>	
  <% end %>
  </table>
  </div>
  
  <div id="third">
  <table width="99%">
    <td valign="top" width="33%">
      <table id='rounded-corner'>
        <tr>
          <th colspan="3">夢ポイント報告</th>
        </tr>
        <tr>
          <th>金額</th>
          <th>ポイント</th>
	      <th>件数</th>	  	  	  
        </tr>
        <% @d_result_yumes.each do |d_result_yume| %>
          <tr>
            <td class="input_no" id="display"><%= num_fmt(d_result_yume.pos1_data) %></td> 	
            <td class="input_no" id="display"><%= num_fmt(d_result_yume.pos2_data) %></td> 
            <td class="input_no" id="display"><%= num_fmt(d_result_yume.pos3_data) %></td>           
          </tr>	
        <% end %>
      </table>
    </td>
    <% if @m_shop.shop_kbn == 1 %> <!-- 油外店のみ表示 -->
      <td valign="top" width="33%">
        <div id="d_result_reserve"><%= render 'd_result_reserve' %></div>
      </td>  
      <td valign="top" width="33%">
        <table id='rounded-corner'>
	      <tr>
	        <th colspan="3">営業件数報告</th>
	      </tr>
	      <tr>  
	        <th></th>
	        <th>日計</th>	
	        <th>累計</th>
	      </tr>
          <% @m_oil_etcs.each do |m_oil_etc| %>
            <tr>
              <th><%= m_oil_etc.oiletc_name %></th> 	
              <td class="input_no" id="display"><%= m_oil_etc.get_num %></td>
              <td class="input_no" id="display"><%= @ruikei_eigyos[m_oil_etc.id][:ruikei] %></td>              
            </tr>
          <% end %>	
        </table>
      </td>
    <% end %>
  </table>
  </div>
</div>

<script>
  $(function () {
	$('#tabs').tabs();
  });	
</script>